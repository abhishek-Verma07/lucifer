<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday My Cutiee Chwenchy ‚úâÔ∏è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: "Comic Sans MS", "Comic Sans", system-ui, -apple-system,
        BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #ffd1ff 0, #ff9a9e 35%, #2b5876 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: #fff;
      overflow-x: hidden;
    }

    .container {
      max-width: 900px;
      width: 100%;
      background: rgba(0, 0, 0, 0.25);
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
      padding: 24px 20px 32px;
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(12px);
    }

    /* Floating bubbles background */
    .bubble {
      position: absolute;
      border-radius: 50%;
      opacity: 0.35;
      animation: float 14s linear infinite;
      pointer-events: none;
    }

    .bubble.small { width: 30px; height: 30px; }
    .bubble.medium { width: 50px; height: 50px; }
    .bubble.large { width: 80px; height: 80px; }

    .bubble:nth-child(1) { top: 80%; left: 5%; background: #ffeaa7; animation-delay: 0s; }
    .bubble:nth-child(2) { top: 90%; left: 80%; background: #fd79a8; animation-delay: 3s; }
    .bubble:nth-child(3) { top: 75%; left: 50%; background: #74b9ff; animation-delay: 6s; }

    @keyframes float {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(-40px) translateX(15px); }
      100% { transform: translateY(0) translateX(0); }
    }

    h1 {
      font-size: 2.4rem;
      line-height: 1.2;
      margin-bottom: 6px;
    }

    h1 span {
      font-size: 2.6rem;
      background: linear-gradient(45deg, #ffeaa7, #fab1a0, #ff7675);
      -webkit-background-clip: text;
      color: transparent;
      font-weight: 700;
    }

    .subtitle {
      font-size: 0.95rem;
      opacity: 0.9;
      margin-bottom: 18px;
    }

    .subtitle span {
      font-weight: 600;
    }

    .hero-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-bottom: 22px;
    }

    /* Minimal premium Cake */

    .cake-wrap {
      width: 220px;
      height: 260px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-direction: column;
    }

    .cake-plate {
      width: 210px;
      height: 26px;
      background: rgba(243, 243, 243, 0.95);
      border-radius: 999px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);
      margin-top: 10px;
    }

    .cake {
      width: 180px;
      height: 100px;
      background: linear-gradient(145deg, #fff3e0, #ffe0c2);
      border-radius: 26px;
      box-shadow:
        0 10px 24px rgba(0, 0, 0, 0.35),
        inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      position: relative;
      overflow: hidden;
      margin-top: 20px;
    }

    .cake::before {
      content: "";
      position: absolute;
      inset: 10px 16px;
      border-radius: 18px;
      border-top: 1px solid rgba(255, 255, 255, 0.8);
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      background: linear-gradient(to right, rgba(255, 198, 160, 0.4), rgba(255, 255, 255, 0.2));
      opacity: 0.8;
    }

    .cake::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 34px;
      background: radial-gradient(circle at 50% 0, rgba(0,0,0,0.08), transparent 60%);
      opacity: 0.35;
    }

    .candles {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 12px;
    }

    .candle {
      width: 10px;
      height: 32px;
      background: linear-gradient(180deg, #ffffff, #ffe6cc);
      border-radius: 999px;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    .candle::after {
      content: "";
      position: absolute;
      top: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 3px;
      height: 6px;
      background: #444;
      border-radius: 999px;
    }

    .flame {
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      width: 14px;
      height: 18px;
      background: radial-gradient(circle at 50% 20%, #ffeaa7 0, #fdcb6e 40%, #e17055 75%);
      border-radius: 50% 50% 50% 50%;
      animation: flicker 0.8s infinite alternate;
      box-shadow: 0 0 14px rgba(255, 234, 167, 0.9);
    }

    .candles.blown .flame {
      opacity: 0;
      box-shadow: none;
      animation: none;
    }

    .blow-hint {
      margin-top: 8px;
      font-size: 0.85rem;
      opacity: 0.9;
      display: none;
    }

    @keyframes flicker {
      0% { transform: translateX(-50%) scale(1); opacity: 0.9; }
      100% { transform: translateX(-50%) scale(1.1); opacity: 1; }
    }

    /* Teddy */

    .teddy-wrap {
      width: 220px;
      height: 220px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .teddy-emoji {
      font-size: 7rem;
      filter: drop-shadow(0 10px 12px rgba(0, 0, 0, 0.35));
      animation: bob 2.4s ease-in-out infinite;
    }

    @keyframes bob {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Sticker image (chwenchy.png) */

    .sticker-wrap {
      margin: 4px auto 16px;
      display: flex;
      justify-content: center;
    }

    .sticker-img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      border: 3px solid rgba(255, 255, 255, 0.7);
    }

    /* Envelope section */

    .envelope-section {
      margin: 10px auto 8px;
    }

    .envelope-hint {
      font-size: 0.9rem;
      opacity: 0.95;
      margin-bottom: 10px;
    }

    .tap-text {
      font-size: 0.85rem;
      opacity: 0.86;
      margin-bottom: 6px;
    }

    .envelope-wrapper {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }

    .envelope {
      width: 92%;
      max-width: 430px;
      position: relative;
      cursor: pointer;
      margin: 0 auto;
    }

    .envelope-body {
      position: relative;
      width: 100%;
      padding-top: 130px; /* flap ke neeche space */
      background: linear-gradient(145deg, #fbe9d7, #fbded0);
      border-radius: 18px;
      box-shadow: 0 16px 30px rgba(0, 0, 0, 0.4);
      overflow: visible;
    }

    .envelope-front {
      position: absolute;
      inset: 0;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      background: linear-gradient(145deg, #fdf5ee, #f7ddc7);
      z-index: 1;
    }

    .envelope-flap {
      position: absolute;
      inset: 0;
      background: linear-gradient(145deg, #ffe6f2, #f6c9df);
      clip-path: polygon(0 0, 50% 60%, 100% 0);
      transform-origin: top;
      transform: rotateX(0deg);
      transition: transform 0.6s ease;
      z-index: 3;
    }

    .envelope-seal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -40%);
      width: 46px;
      height: 46px;
      background: #ffcc66;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      color: #333;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35);
      z-index: 4;
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .letter {
      position: relative;
      width: 92%;
      margin: 140px auto 18px;
      background: #fff;
      border-radius: 18px;
      padding: 18px 18px 22px;
      text-align: left;
      color: #2d3436;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      z-index: 2;
      transition: opacity 0.5s ease, max-height 0.5s ease;
    }

    .letter h2 {
      font-size: 1.15rem;
      margin-bottom: 8px;
      color: #d63031;
    }

    .letter p {
      font-size: 0.95rem;
      line-height: 1.5;
      margin-bottom: 8px;
    }

    .letter p.closing {
      margin-top: 10px;
      font-weight: 600;
      color: #6c5ce7;
    }

    .envelope.open .envelope-flap {
      transform: rotateX(-160deg);
    }

    .envelope.open .envelope-seal {
      opacity: 0;
      transform: translate(-50%, -40%) scale(0.8);
    }

    .envelope.open .letter {
      opacity: 1;
      max-height: 500px; /* full text visible */
    }

    /* After letter section */

    .after-letter {
      margin-top: 20px;
      opacity: 0;
      transform: translateY(20px);
      max-height: 0;
      overflow: hidden;
      transition: opacity 0.7s ease, transform 0.7s ease, max-height 0.7s ease;
    }

    .after-letter.show {
      opacity: 1;
      transform: translateY(0);
      max-height: 600px;
    }

    .wish-line {
      font-size: 1rem;
      margin-bottom: 10px;
      font-weight: 500;
    }

    .typewriter {
      font-size: 0.95rem;
      min-height: 22px;
      margin-bottom: 12px;
      opacity: 0.92;
      white-space: pre-line;
    }

    .cards-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 4px;
    }

    .mini-card {
      flex: 1 1 150px;
      max-width: 260px;
      background: rgba(0, 0, 0, 0.35);
      border-radius: 16px;
      padding: 10px 12px 12px;
      text-align: left;
      font-size: 0.9rem;
      line-height: 1.45;
      border: 1px solid rgba(255, 255, 255, 0.12);
      opacity: 0;
      transform: translateX(40px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .mini-card.show {
      opacity: 1;
      transform: translateX(0);
    }

    .mini-card-title {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 4px;
    }

    /* Enjoy message after cake cut */

    .enjoy-message {
      margin-top: 18px;
      font-size: 1rem;
      font-weight: 600;
      line-height: 1.6;
      opacity: 0;
      transform: translateY(14px) scale(0.97);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .enjoy-message.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Music button */

    .music-btn {
      margin-top: 10px;
      padding: 7px 18px;
      border-radius: 999px;
      border: none;
      outline: none;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      background: #ffeaa7;
      color: #d63031;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .music-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
    }

    .music-btn:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.6);
    }

    /* Confetti */

    .confetti-piece {
      position: fixed;
      width: 8px;
      height: 14px;
      background: #ffeaa7;
      top: -20px;
      border-radius: 2px;
      opacity: 0.9;
      animation: confetti-fall linear forwards;
      z-index: 9999;
      pointer-events: none;
    }

    @keyframes confetti-fall {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(110vh) rotate(360deg); }
    }

    @media (max-width: 620px) {
      h1 { font-size: 1.9rem; }
      h1 span { font-size: 2.1rem; }
      .container { padding: 18px 14px 25px; }
      .hero-row { gap: 8px; }
      .cake-wrap, .teddy-wrap { width: 180px; height: 220px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Soft bubbles -->
    <div class="bubble small"></div>
    <div class="bubble large"></div>
    <div class="bubble medium"></div>

    <h1>Happy Birthday, <span>Chwenchy Babuu</span> üéâ</h1>
    <p class="subtitle">
      from Lucifer üòâ
      <span>Your Crazy Friend üòú</span>
    </p>

    <div class="hero-row">
      <!-- Cake -->
      <div class="cake-wrap" id="cakeWrap">
        <div class="cake" id="cake">
          <div class="candles" id="candles">
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
          </div>
        </div>
        <div class="cake-plate"></div>

        <!-- SONG BUTTON yahi hai: pehle ye dabayegi, phir blow karegi -->
        <button class="music-btn" id="musicBtn">
          üéµ Play Birthday Song
        </button>

        <p class="blow-hint" id="blowHint">
          Song play kar, phir mic me halki si phoonk maar ke candles off kar de üé§
        </p>
      </div>

      <!-- Teddy -->
      <div class="teddy-wrap">
        <div class="teddy-emoji">üß∏</div>
      </div>
    </div>

    <!-- Sticker image (uski photo) -->
    <div class="sticker-wrap">
      <img src="chwenchy.png" alt="Chwenchy" class="sticker-img" />
    </div>

    <!-- Envelope -->
    <div class="envelope-section">
      <p class="envelope-hint">Ikk secret letter hai tere liye, Chwenchy ‚úâÔ∏è</p>
      <p class="tap-text">Envelope pe click / tap kar ke open kar üëá</p>

      <div class="envelope-wrapper">
        <div class="envelope" id="envelope">
          <div class="envelope-body">
            <div class="envelope-front"></div>
            <div class="envelope-flap"></div>
            <div class="envelope-seal">‚≠ê</div>

            <div class="letter" id="letter">
              <h2>Dear babuu, Chwenchy,</h2>
              <p>
                Happy Birthday, to my cutest bestieüíï! üí´ Aaj ka din sirf
                <strong>tera</strong> hai, isliye Am grateful ki tu meri bestie hai.
              </p>
              <p>
                Teri bakchodi, teri bakbak, tera care, aur tera
                ‚Äúthoda sa attitude‚Äù ‚Äì sab kuch perfect combo hai. üòå
              </p>
              <p>
                Main wish karta hu ki tera har dream reality ban jaye,
                tujhe hamesha woh log mile jo tujhe genuinely value karein,
                aur kabhi bhi tera smile fade na ho. Jo bhi tension ho,
                Idhar transfer kar diya kar, Aur kis liye hoon main? üíïüòé
              </p>
              <p class="closing">
                Stay this pure, this crazy & this special forever.  
                I‚Äôm always here ‚Äì a call, a text, ya ek ‚ÄúHeyy ree‚Äù door.üíùü´∂
              </p>
              <p class="closing">
                With lots of love,  
                Abhishek üòâ
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- After letter reveal (promise list) -->
    <div class="after-letter" id="afterLetter">
      <p class="wish-line">‚ú® Aaj ke liye ek chhota sa promise list for you ‚ú®</p>
      <p class="typewriter" id="typewriter"></p>

      <div class="cards-row">
        <div class="mini-card">
          <div class="mini-card-title">üåü Wish #1</div>
          <p>
            Tere life me hamesha peace rahe aur sirf good vibesü§ó, good newsüíñ & good foodü´†.
          </p>
        </div>
        <div class="mini-card">
          <div class="mini-card-title">üß∏ Wish #2</div>
          <p>
            Tanna nin naaare naran na naaro naaare naaare rooooü§£ü§£ ü§£ü§£ .
          </p>
        </div>
      </div>
    </div>

    <!-- Enjoy message after cake cut (scroll karne pe) -->
    <div class="enjoy-message" id="enjoyMessage">
      Enjoy your day to the fullest, Chwenchy! üíñ<br />
      Tu deserve karti hai saare smiles, saari good vibes aur bohot saari happiness aaj ke din. ‚ú®
    </div>

    <!-- Audio -->
    <audio id="music" src="birthday.mp3"></audio>
    <audio id="clapAudio" src="clap.mp3"></audio>
  </div>

  <script>
    const envelope = document.getElementById("envelope");
    const letter = document.getElementById("letter");
    const afterLetter = document.getElementById("afterLetter");
    const typewriterEl = document.getElementById("typewriter");
    const musicBtn = document.getElementById("musicBtn");
    const music = document.getElementById("music");
    const cards = document.querySelectorAll(".mini-card");
    const cakeWrap = document.getElementById("cakeWrap");
    const cake = document.getElementById("cake");
    const candles = document.getElementById("candles");
    const blowHint = document.getElementById("blowHint");
    const clapAudio = document.getElementById("clapAudio");
    const enjoyMessage = document.getElementById("enjoyMessage");

    let letterOpened = false;
    let promisesShown = false;
    let candlesBlown = false;
    let cakeCut = false;
    let enjoyReady = false;
    let enjoyShown = false;

    const twText =
      "Sweetie, is saal sirf ek hi target: more smiles, more memories,\n" +
      "aur hum dono ki aur bhi zyada bakchodi together. ‚ú®";

    function startTypewriter(text, element, speed = 45) {
      let i = 0;
      element.textContent = "";
      const interval = setInterval(() => {
        element.textContent += text.charAt(i);
        i++;
        if (i >= text.length) {
          clearInterval(interval);
        }
      }, speed);
    }

    function revealCardsSequentially() {
      cards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.add("show");
        }, 450 * index);
      });
    }

    function launchConfetti() {
      const colors = ["#ffeaa7", "#fab1a0", "#ff7675", "#74b9ff", "#a29bfe", "#fd79a8"];

      for (let i = 0; i < 90; i++) {
        const piece = document.createElement("div");
        piece.classList.add("confetti-piece");
        piece.style.left = Math.random() * 100 + "vw";
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        const duration = 3 + Math.random() * 2;
        piece.style.animationDuration = duration + "s";
        document.body.appendChild(piece);

        setTimeout(() => {
          piece.remove();
        }, duration * 1000);
      }
    }

    // Promise list only after scroll/swipe
    function checkScrollForPromises() {
      if (!letterOpened || promisesShown) return;
      const rect = letter.getBoundingClientRect();
      if (rect.bottom < window.innerHeight - 40 || window.scrollY > 150) {
        promisesShown = true;
        afterLetter.classList.add("show");
        startTypewriter(twText, typewriterEl);
        launchConfetti();
        revealCardsSequentially();
      }
    }

    // Enjoy message only after cake cut + scroll
    function checkScrollForEnjoy() {
      if (!enjoyReady || enjoyShown) return;
      const rect = enjoyMessage.getBoundingClientRect();
      if (rect.top < window.innerHeight - 60) {
        enjoyShown = true;
        enjoyMessage.classList.add("show");
      }
    }

    window.addEventListener("scroll", () => {
      checkScrollForPromises();
      checkScrollForEnjoy();
    });

    // Envelope click
    envelope.addEventListener("click", () => {
      envelope.classList.add("open");

      if (!letterOpened) {
        letterOpened = true;
        // letter open hone ke baad hi mic hint
        setTimeout(() => {
          blowHint.style.display = "block";
          startMicForBlow();
        }, 700);
      }
    });

    // Mic detection for blowing candles
    function startMicForBlow() {
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        blowHint.textContent = "Mic support nahi mila, candles pe tap karke off kar de üéÇ";
        cakeWrap.addEventListener("click", blowOutCandlesOnce);
        return;
      }

      navigator.mediaDevices
        .getUserMedia({ audio: true })
        .then((stream) => {
          const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
          const source = audioCtx.createMediaStreamSource(stream);
          const analyser = audioCtx.createAnalyser();
          analyser.fftSize = 512;

          source.connect(analyser);

          const dataArray = new Uint8Array(analyser.frequencyBinCount);

          function detectBlow() {
            analyser.getByteFrequencyData(dataArray);
            let sum = 0;
            for (let i = 0; i < dataArray.length; i++) sum += dataArray[i];
            const volume = sum / dataArray.length;

            if (volume > 80 && !candlesBlown) {
              blowOutCandlesOnce();
            }
            if (!candlesBlown) {
              requestAnimationFrame(detectBlow);
            }
          }
          detectBlow();
        })
        .catch(() => {
          blowHint.textContent = "Mic permission nahi mila, candles pe tap karke off kar de üéÇ";
          cakeWrap.addEventListener("click", blowOutCandlesOnce);
        });
    }

    function blowOutCandlesOnce() {
      if (candlesBlown) return;
      candlesBlown = true;
      candles.classList.add("blown");
      blowHint.textContent = "Nice! Now swipe to cut the cake üëâüç∞";
    }

    // Swipe to cut cake
    let touchStartX = null;

    cakeWrap.addEventListener("touchstart", (e) => {
      touchStartX = e.changedTouches[0].clientX;
    });

    cakeWrap.addEventListener("touchend", (e) => {
      if (!candlesBlown || cakeCut || touchStartX === null) return;
      const endX = e.changedTouches[0].clientX;
      const diffX = endX - touchStartX;
      if (Math.abs(diffX) > 60) {
        cutCake();
      }
      touchStartX = null;
    });

    // Desktop fallback: click after blown
    cakeWrap.addEventListener("click", () => {
      if (candlesBlown && !cakeCut) cutCake();
    });

    function cutCake() {
      cakeCut = true;
      cake.style.boxShadow =
        "0 10px 24px rgba(0,0,0,0.45), inset 0 -2px 0 rgba(0,0,0,0.08)";
      cake.style.position = "relative";
      cake.style.overflow = "visible";

      const cutLine = document.createElement("div");
      cutLine.style.position = "absolute";
      cutLine.style.top = "0";
      cutLine.style.bottom = "0";
      cutLine.style.left = "50%";
      cutLine.style.width = "2px";
      cutLine.style.background = "rgba(0,0,0,0.12)";
      cutLine.style.boxShadow = "0 0 6px rgba(0,0,0,0.2)";
      cake.appendChild(cutLine);

      if (clapAudio) {
        clapAudio.currentTime = 0;
        clapAudio.play().catch(() => {});
      }

      enjoyReady = true; // ab thoda niche scroll karegi to final message dikhega
    }

    // Music (button: candle blow se just pehle play karne ke liye)
    musicBtn.addEventListener("click", () => {
      if (music.paused) {
        music
          .play()
          .then(() => {
            musicBtn.textContent = "‚è∏ Pause Birthday Song";
          })
          .catch(() => {
            alert("Browser ne auto-play block kar diyaü§£ü§£. Thoda wait karke dobara try kar üôÇ");
          });
      } else {
        music.pause();
        musicBtn.textContent = "üéµ Play Birthday Song";
      }
    });
  </script>
</body>
</html>
